<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نمایش قابلیت Auto-Layout سایدبار</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            direction: rtl;
        }
        
        .demo-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }
        
        .demo-header h1 {
            margin: 0 0 10px 0;
            font-size: 2.5em;
        }
        
        .demo-header p {
            margin: 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .demo-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .demo-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .demo-section h2 {
            color: #333;
            margin: 0 0 20px 0;
            padding-bottom: 15px;
            border-bottom: 2px solid #667eea;
        }
        
        .demo-section h3 {
            color: #555;
            margin: 20px 0 15px 0;
        }
        
        .layout-example {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            margin: 20px 0;
            background: #fafafa;
        }
        
        .layout-example-header {
            background: #667eea;
            color: white;
            padding: 15px 20px;
            font-weight: bold;
        }
        
        .content-area {
            background: white;
            padding: 30px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
            color: #666;
        }
        
        .content-area h4 {
            margin: 0;
            color: #333;
        }
        
        .controls {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .control-group {
            display: flex;
            gap: 15px;
            align-items: center;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .control-group label {
            font-weight: bold;
            color: #555;
            min-width: 120px;
        }
        
        .control-group select,
        .control-group input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }
        
        .btn.secondary {
            background: #6c757d;
        }
        
        .btn.secondary:hover {
            background: #5a6268;
        }
        
        .btn.success {
            background: #28a745;
        }
        
        .btn.success:hover {
            background: #218838;
        }
        
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 6px;
        }
        
        .info-box h4 {
            margin: 0 0 10px 0;
            color: #1976d2;
        }
        
        .info-box p {
            margin: 5px 0;
            color: #333;
        }
        
        .code-example {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .feature-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .feature-card h4 {
            color: #495057;
            margin: 0 0 15px 0;
        }
        
        .feature-card p {
            color: #6c757d;
            margin: 0;
            line-height: 1.5;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 8px;
        }
        
        .status-active {
            background: #28a745;
        }
        
        .status-inactive {
            background: #dc3545;
        }
        
        @media (max-width: 768px) {
            .control-group {
                flex-direction: column;
                align-items: stretch;
            }
            
            .control-group label {
                min-width: auto;
            }
            
            .feature-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="demo-header">
        <h1>🎯 قابلیت Auto-Layout سایدبار</h1>
        <p>سایدبار به صورت خودکار layout صفحه را تنظیم می‌کند</p>
    </div>

    <div class="demo-container">
        <!-- توضیحات کلی -->
        <div class="demo-section">
            <h2>📋 معرفی قابلیت Auto-Layout</h2>
            <div class="info-box">
                <h4>✨ ویژگی‌های جدید:</h4>
                <p><strong>تغییر خودکار layout:</strong> سایدبار به صورت خودکار المنت‌های کناری را تنظیم می‌کند</p>
                <p><strong>پشتیبانی از راست/چپ چین:</strong> با توجه به موقعیت سایدبار، layout مناسب اعمال می‌شود</p>
                <p><strong>تغییر سایز خودکار:</strong> با کوچک/بزرگ شدن سایدبار، المنت‌های کناری هم تغییر سایز می‌دهند</p>
                <p><strong>انیمیشن نرم:</strong> تمام تغییرات با انیمیشن نرم انجام می‌شود</p>
            </div>
        </div>

        <!-- مثال 1: Layout ساده -->
        <div class="demo-section">
            <h2>🔧 مثال 1: Layout ساده با Auto-Layout</h2>
            <p>در این مثال، سایدبار به صورت خودکار layout را تنظیم می‌کند:</p>
            
            <div class="layout-example">
                <div class="layout-example-header">
                    Layout ساده - سایدبار چپ
                </div>
                <div style="display: flex;">
                    <sc-sidebar 
                        id="sidebar1"
                        theme="light"
                        position="left"
                        width="280px"
                        collapsible
                        show-header
                        searchable
                        title="منوی اصلی">
                        
                        <sc-sidebar-item 
                            key="dashboard" 
                            text="داشبورد" 
                            icon="fas fa-tachometer-alt">
                        </sc-sidebar-item>
                        
                        <sc-sidebar-item 
                            key="users" 
                            text="کاربران" 
                            icon="fas fa-users">
                            
                            <sc-sidebar-item 
                                key="user-list" 
                                text="لیست کاربران" 
                                icon="fas fa-list">
                            </sc-sidebar-item>
                            
                            <sc-sidebar-item 
                                key="user-add" 
                                text="افزودن کاربر" 
                                icon="fas fa-user-plus">
                            </sc-sidebar-item>
                        </sc-sidebar-item>
                        
                        <sc-sidebar-item 
                            key="products" 
                            text="محصولات" 
                            icon="fas fa-box">
                        </sc-sidebar-item>
                        
                        <sc-sidebar-item 
                            key="settings" 
                            text="تنظیمات" 
                            icon="fas fa-cog">
                        </sc-sidebar-item>
                    </sc-sidebar>
                    
                    <div class="content-area" style="flex: 1;">
                        <div>
                            <h4>محتوای اصلی</h4>
                            <p>این محتوا به صورت خودکار کنار سایدبار قرار گرفته</p>
                            <p>با تغییر سایز سایدبار، این محتوا هم تغییر سایز می‌دهد</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <h3>کنترل‌ها:</h3>
                <div class="control-group">
                    <label>موقعیت سایدبار:</label>
                    <select id="position1" onchange="changePosition('sidebar1', this.value)">
                        <option value="left">چپ</option>
                        <option value="right">راست</option>
                    </select>
                </div>
                <div classcontrol-group">
                    <label>وضعیت:</label>
                    <button class="btn" onclick="toggleSidebar('sidebar1')">تغییر سایز</button>
                    <button class="btn secondary" onclick="getLayoutInfo('sidebar1')">اطلاعات Layout</button>
                </div>
            </div>
        </div>

        <!-- مثال 2: Layout با Grid -->
        <div class="demo-section">
            <h2>🔧 مثال 2: Layout با CSS Grid</h2>
            <p>استفاده از CSS Grid برای layout بهتر:</p>
            
            <div class="layout-example">
                <div class="layout-example-header">
                    Layout با CSS Grid
                </div>
                <div class="sc-grid-layout" id="gridLayout" data-sidebar-position="left">
                    <sc-sidebar 
                        id="sidebar2"
                        theme="dark"
                        position="left"
                        width="280px"
                        collapsible
                        show-header
                        title="منوی تیره">
                        
                        <sc-sidebar-item 
                            key="home" 
                            text="خانه" 
                            icon="fas fa-home">
                        </sc-sidebar-item>
                        
                        <sc-sidebar-item 
                            key="profile" 
                            text="پروفایل" 
                            icon="fas fa-user">
                        </sc-sidebar-item>
                        
                        <sc-sidebar-item 
                            key="messages" 
                            text="پیام‌ها" 
                            icon="fas fa-envelope">
                        </sc-sidebar-item>
                        
                        <sc-sidebar-item 
                            key="notifications" 
                            text="اعلان‌ها" 
                            icon="fas fa-bell">
                        </sc-sidebar-item>
                    </sc-sidebar>
                    
                    <div class="content-area">
                        <div>
                            <h4>محتوای Grid</h4>
                            <p>این layout از CSS Grid استفاده می‌کند</p>
                            <p>سایدبار و محتوا در یک grid container قرار دارند</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <h3>کنترل‌ها:</h3>
                <div class="control-group">
                    <label>موقعیت:</label>
                    <select id="position2" onchange="changeGridPosition(this.value)">
                        <option value="left">چپ</option>
                        <option value="right">راست</option>
                    </select>
                </div>
                <div class="control-group">
                    <button class="btn" onclick="toggleSidebar('sidebar2')">تغییر سایز</button>
                    <button class="btn secondary" onclick="toggleGridLayout()">تغییر Layout</button>
                </div>
            </div>
        </div>

        <!-- مثال 3: Layout با Flexbox -->
        <div class="demo-section">
            <h2>🔧 مثال 3: Layout با Flexbox</h2>
            <p>استفاده از Flexbox برای layout انعطاف‌پذیر:</p>
            
            <div class="layout-example">
                <div class="layout-example-header">
                    Layout با Flexbox
                </div>
                <div class="sc-flex-layout">
                    <sc-sidebar 
                        id="sidebar3"
                        theme="light"
                        position="right"
                        width="280px"
                        collapsible
                        show-header
                        title="منوی راست">
                        
                        <sc-sidebar-item 
                            key="analytics" 
                            text="تحلیل‌ها" 
                            icon="fas fa-chart-bar">
                        </sc-sidebar-item>
                        
                        <sc-sidebar-item 
                            key="reports" 
                            text="گزارش‌ها" 
                            icon="fas fa-file-alt">
                        </sc-sidebar-item>
                        
                        <sc-sidebar-item 
                            key="tools" 
                            text="ابزارها" 
                            icon="fas fa-tools">
                        </sc-sidebar-item>
                    </sc-sidebar>
                    
                    <div class="sc-content content-area">
                        <div>
                            <h4>محتوای Flexbox</h4>
                            <p>این layout از Flexbox استفاده می‌کند</p>
                            <p>محتوا به صورت انعطاف‌پذیر کنار سایدبار قرار می‌گیرد</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <h3>کنترل‌ها:</h3>
                <div class="control-group">
                    <label>موقعیت:</label>
                    <select id="position3" onchange="changePosition('sidebar3', this.value)">
                        <option value="right">راست</option>
                        <option value="left">چپ</option>
                    </select>
                </div>
                <div class="control-group">
                    <button class="btn" onclick="toggleSidebar('sidebar3')">تغییر سایز</button>
                    <button class="btn secondary" onclick="getLayoutInfo('sidebar3')">اطلاعات Layout</button>
                </div>
            </div>
        </div>

        <!-- ویژگی‌های Auto-Layout -->
        <div class="demo-section">
            <h2>🚀 ویژگی‌های Auto-Layout</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>🎯 تشخیص خودکار</h4>
                    <p>کامپوننت به صورت خودکار المنت‌های کناری را تشخیص می‌دهد</p>
                </div>
                <div class="feature-card">
                    <h4>📱 Responsive</h4>
                    <p>در موبایل، layout به صورت خودکار تغییر می‌کند</p>
                </div>
                <div class="feature-card">
                    <h4>⚡ عملکرد بالا</h4>
                    <p>از MutationObserver و debouncing برای عملکرد بهتر استفاده می‌کند</p>
                </div>
                <div class="feature-card">
                    <h4>🎨 انیمیشن نرم</h4>
                    <p>تمام تغییرات با انیمیشن نرم و زیبا انجام می‌شود</p>
                </div>
            </div>
        </div>

        <!-- کد نمونه -->
        <div class="demo-section">
            <h2>💻 کد نمونه</h2>
            <h3>استفاده ساده:</h3>
            <div class="code-example">
&lt;!-- فقط سایدبار را اضافه کنید --&gt;
&lt;sc-sidebar theme="light" position="left" collapsible&gt;
    &lt;sc-sidebar-item text="داشبورد" icon="fas fa-home"&gt;&lt;/sc-sidebar-item&gt;
&lt;/sc-sidebar&gt;

&lt;!-- محتوای بعدی به صورت خودکار کنار سایدبار قرار می‌گیرد --&gt;
&lt;div class="content"&gt;
    محتوای شما اینجا
&lt;/div&gt;
            </div>
            
            <h3>استفاده با CSS Grid:</h3>
            <div class="code-example">
&lt;div class="sc-grid-layout"&gt;
    &lt;sc-sidebar theme="dark" collapsible&gt;&lt;/sc-sidebar&gt;
    &lt;div class="content"&gt;محتوای شما&lt;/div&gt;
&lt;/div&gt;
            </div>
            
            <h3>استفاده با Flexbox:</h3>
            <div class="code-example">
&lt;div class="sc-flex-layout"&gt;
    &lt;sc-sidebar theme="light" position="right"&gt;&lt;/sc-sidebar&gt;
    &lt;div class="sc-content"&gt;محتوای شما&lt;/div&gt;
&lt;/div&gt;
            </div>
        </div>

        <!-- API و متدها -->
        <div class="demo-section">
            <h2>🔌 API و متدها</h2>
            <div class="info-box">
                <h4>متدهای جدید:</h4>
                <p><code>enableAutoLayout()</code> - فعال‌سازی auto-layout</p>
                <p><code>disableAutoLayout()</code> - غیرفعال‌سازی auto-layout</p>
                <p><code>updateLayout()</code> - به‌روزرسانی دستی layout</p>
                <p><code>getLayoutInfo()</code> - دریافت اطلاعات layout فعلی</p>
            </div>
            
            <div class="info-box">
                <h4>Event های جدید:</h4>
                <p><code>sidebar-layout-changed</code> - زمانی که layout تغییر می‌کند</p>
            </div>
        </div>
    </div>

    <!-- Load the sidebar component -->
    <script src="sidebar.js"></script>
    
    <script>
        // Wait for DOM to be ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Auto-layout demo loaded successfully!');
            
            // Initialize all sidebars
            initializeSidebars();
        });

        function initializeSidebars() {
            // Sidebar 1
            const sidebar1 = document.getElementById('sidebar1');
            if (sidebar1) {
                sidebar1.addEventListener('sidebar-layout-changed', function(e) {
                    console.log('Sidebar 1 layout changed:', e.detail);
                });
            }
            
            // Sidebar 2
            const sidebar2 = document.getElementById('sidebar2');
            if (sidebar2) {
                sidebar2.addEventListener('sidebar-layout-changed', function(e) {
                    console.log('Sidebar 2 layout changed:', e.detail);
                });
            }
            
            // Sidebar 3
            const sidebar3 = document.getElementById('sidebar3');
            if (sidebar3) {
                sidebar3.addEventListener('sidebar-layout-changed', function(e) {
                    console.log('Sidebar 3 layout changed:', e.detail);
                });
            }
        }

        function changePosition(sidebarId, position) {
            const sidebar = document.getElementById(sidebarId);
            if (sidebar) {
                sidebar.setAttribute('position', position);
                console.log(`Sidebar ${sidebarId} position changed to: ${position}`);
            }
        }

        function changeGridPosition(position) {
            const gridLayout = document.getElementById('gridLayout');
            const sidebar = document.getElementById('sidebar2');
            
            if (gridLayout && sidebar) {
                gridLayout.setAttribute('data-sidebar-position', position);
                sidebar.setAttribute('position', position);
                console.log(`Grid layout position changed to: ${position}`);
            }
        }

        function toggleSidebar(sidebarId) {
            const sidebar = document.getElementById(sidebarId);
            if (sidebar) {
                sidebar.toggleCollapse();
                console.log(`Sidebar ${sidebarId} toggled`);
            }
        }

        function toggleGridLayout() {
            const gridLayout = document.getElementById('gridLayout');
            if (gridLayout) {
                gridLayout.classList.toggle('sidebar-collapsed');
                console.log('Grid layout toggled');
            }
        }

        function getLayoutInfo(sidebarId) {
            const sidebar = document.getElementById(sidebarId);
            if (sidebar) {
                const info = sidebar.getLayoutInfo();
                console.log(`Layout info for ${sidebarId}:`, info);
                
                // Show info in alert for demo purposes
                alert(`اطلاعات Layout:\n` +
                      `موقعیت: ${info.position === 'left' ? 'چپ' : 'راست'}\n` +
                      `وضعیت: ${info.collapsed ? 'کوچک شده' : 'بزرگ'}\n` +
                      `عرض: ${info.width}px\n` +
                      `حاشیه چپ: ${info.marginLeft}px\n` +
                      `حاشیه راست: ${info.marginRight}px`);
            }
        }

        // Listen for layout change events
        document.addEventListener('sidebar-layout-changed', function(e) {
            console.log('Global layout change event:', e.detail);
            
            // Update any global UI elements if needed
            updateGlobalLayout(e.detail);
        });

        function updateGlobalLayout(layoutInfo) {
            // Update any global layout indicators
            const statusIndicators = document.querySelectorAll('.status-indicator');
            statusIndicators.forEach(indicator => {
                if (layoutInfo.collapsed) {
                    indicator.className = 'status-indicator status-active';
                } else {
                    indicator.className = 'status-indicator status-inactive';
                }
            });
        }
    </script>
</body>
</html>
