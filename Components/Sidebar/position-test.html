<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Position Test - Sidebar Component</title>
    <link rel="stylesheet" href="position-test.css">
</head>
<body>
    <div class="test-container">
        <!-- Sidebar -->
        <sc-sidebar 
            id="test-sidebar"
            theme="light"
            position="right"
            width="300px"
            collapsible
            show-header
            show-footer
            searchable
            animations
            responsive
            remember-state>
            
            <sc-sidebar-item 
                key="dashboard" 
                text="داشبورد" 
                icon="fas fa-tachometer-alt"
                description="نمایش کلی سیستم"
                behavior="clickable">
            </sc-sidebar-item>
            
            <sc-sidebar-item 
                key="users" 
                text="کاربران" 
                icon="fas fa-users"
                description="مدیریت کاربران سیستم"
                behavior="expandable">
                
                <sc-sidebar-item 
                    key="user-list" 
                    text="لیست کاربران" 
                    icon="fas fa-list"
                    description="مشاهده تمام کاربران"
                    behavior="clickable">
                </sc-sidebar-item>
                
                <sc-sidebar-item 
                    key="user-add" 
                    text="افزودن کاربر" 
                    icon="fas fa-user-plus"
                    description="ایجاد کاربر جدید"
                    behavior="clickable">
                </sc-sidebar-item>
            </sc-sidebar-item>
            
            <sc-sidebar-item 
                key="settings" 
                text="تنظیمات" 
                icon="fas fa-cog"
                description="تنظیمات سیستم"
                behavior="clickable">
            </sc-sidebar-item>
        </sc-sidebar>
        
        <!-- Main Content -->
        <div class="main-content">
            <h1>تست Position در Sidebar</h1>
            
            <div class="test-buttons">
                <button class="btn btn-primary" onclick="changePosition('left')">
                    تغییر به سمت چپ
                </button>
                <button class="btn btn-success" onclick="changePosition('right')">
                    تغییر به سمت راست
                </button>
                <button class="btn btn-warning" onclick="toggleSidebar()">
                    باز/بسته کردن
                </button>
                <button class="btn btn-primary" onclick="getLayoutInfo()">
                    اطلاعات Layout
                </button>
            </div>
            
            <div class="position-info">
                <h3>وضعیت فعلی:</h3>
                <p><strong>Position:</strong> <span id="current-position">right</span></p>
                <p><strong>Collapsed:</strong> <span id="current-collapsed">false</span></p>
                <p><strong>Width:</strong> <span id="current-width">300px</span></p>
            </div>
            
            <div class="layout-info">
                <h3>اطلاعات Layout:</h3>
                <pre id="layout-info">کلیک کنید تا اطلاعات نمایش داده شود</pre>
            </div>
            
            <div class="test-content">
                <h3>محتوای تست:</h3>
                <p>این صفحه برای تست عملکرد position در کامپوننت sidebar طراحی شده است.</p>
                <p>مشکلات احتمالی:</p>
                <ul>
                    <li>قاطی شدن چپ و راست</li>
                    <li>مشکل در responsive</li>
                    <li>مشکل در collapsed state</li>
                    <li>مشکل در auto-layout</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="sidebar.js"></script>
    <script>
        function changePosition(position) {
            const sidebar = document.getElementById('test-sidebar');
            sidebar.setAttribute('position', position);
            
            // Update display
            document.getElementById('current-position').textContent = position;
            
            // Force layout update
            setTimeout(() => {
                sidebar.updateLayout();
            }, 100);
        }
        
        function toggleSidebar() {
            const sidebar = document.getElementById('test-sidebar');
            sidebar.toggleCollapse();
            
            // Update display
            setTimeout(() => {
                const info = sidebar.getLayoutInfo();
                document.getElementById('current-collapsed').textContent = info.collapsed;
                document.getElementById('current-width').textContent = info.width + 'px';
            }, 100);
        }
        
        function getLayoutInfo() {
            const sidebar = document.getElementById('test-sidebar');
            const info = sidebar.getLayoutInfo();
            
            document.getElementById('layout-info').textContent = JSON.stringify(info, null, 2);
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.getElementById('test-sidebar');
            
            // Wait for component to be ready
            setTimeout(() => {
                const info = sidebar.getLayoutInfo();
                document.getElementById('current-position').textContent = info.position;
                document.getElementById('current-collapsed').textContent = info.collapsed;
                document.getElementById('current-width').textContent = info.width + 'px';
            }, 500);
        });
    </script>
</body>
</html>
