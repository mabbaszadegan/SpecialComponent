<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Display Test - Sidebar</title>
    <style>
        body { margin: 20px; font-family: Arial, sans-serif; }
        .test-section { margin: 30px 0; padding: 20px; border: 1px solid #ccc; }
        .layout-container { border: 2px dashed #999; padding: 20px; margin: 20px 0; }
        .content-area { background: #f0f0f0; padding: 20px; margin-left: 20px; }
        .controls { margin: 20px 0; }
        button { margin: 5px; padding: 8px 15px; }
        .info { background: #e7f3ff; padding: 15px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>Auto Display Property Test - Sidebar Component</h1>
    
    <div class="info">
        <h3>How It Works:</h3>
        <ul>
            <li><strong>Flexbox/Grid Layout:</strong> Automatically sets <code>display: contents</code></li>
            <li><strong>Block Layout:</strong> Uses default <code>display: block</code></li>
            <li><strong>Manual Override:</strong> Users can still manually set display properties</li>
        </ul>
    </div>

    <!-- Test 1: Flexbox Layout -->
    <div class="test-section">
        <h2>Test 1: Flexbox Layout</h2>
        <div class="layout-container" style="display: flex;">
            <sc-sidebar id="flexSidebar" theme="light" position="left" width="250px" collapsible show-header>
                <sc-sidebar-item key="dashboard" text="Dashboard" icon="fas fa-tachometer-alt"></sc-sidebar-item>
                <sc-sidebar-item key="users" text="Users" icon="fas fa-users"></sc-sidebar-item>
            </sc-sidebar>
            <div class="content-area">
                <h3>Content Area</h3>
                <p>This should work with <code>display: contents</code> automatically set.</p>
            </div>
        </div>
        <div class="controls">
            <button onclick="getInfo('flexSidebar')">Get Info</button>
            <button onclick="resetDisplay('flexSidebar')">Reset to Auto</button>
        </div>
    </div>

    <!-- Test 2: Grid Layout -->
    <div class="test-section">
        <h2>Test 2: Grid Layout</h2>
        <div class="layout-container" style="display: grid; grid-template-columns: 250px 1fr; gap: 20px;">
            <sc-sidebar id="gridSidebar" theme="dark" position="left" width="250px" collapsible show-header>
                <sc-sidebar-item key="analytics" text="Analytics" icon="fas fa-chart-bar"></sc-sidebar-item>
                <sc-sidebar-item key="reports" text="Reports" icon="fas fa-file-alt"></sc-sidebar-item>
            </sc-sidebar>
            <div class="content-area">
                <h3>Grid Content</h3>
                <p>This should work with <code>display: contents</code> automatically set.</p>
            </div>
        </div>
        <div class="controls">
            <button onclick="getInfo('gridSidebar')">Get Info</button>
            <button onclick="resetDisplay('gridSidebar')">Reset to Auto</button>
        </div>
    </div>

    <!-- Test 3: Block Layout -->
    <div class="test-section">
        <h2>Test 3: Block Layout</h2>
        <div class="layout-container">
            <sc-sidebar id="blockSidebar" theme="light" position="left" width="250px" collapsible show-header>
                <sc-sidebar-item key="home" text="Home" icon="fas fa-home"></sc-sidebar-item>
                <sc-sidebar-item key="about" text="About" icon="fas fa-info-circle"></sc-sidebar-item>
            </sc-sidebar>
            <div class="content-area">
                <h3>Block Content</h3>
                <p>This should use default <code>display: block</code>.</p>
            </div>
        </div>
        <div class="controls">
            <button onclick="getInfo('blockSidebar')">Get Info</button>
            <button onclick="resetDisplay('blockSidebar')">Reset to Auto</button>
        </div>
    </div>

    <!-- Results -->
    <div class="test-section">
        <h2>Results</h2>
        <div id="results">Use the buttons above to see sidebar information.</div>
    </div>

    <script src="sidebar.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Sidebars loaded');
        });
        
        function getInfo(sidebarId) {
            const sidebar = document.getElementById(sidebarId);
            if (!sidebar) return;
            
            const info = sidebar.getLayoutInfo();
            const displayValue = sidebar.style.display || 'auto';
            const isAuto = sidebar.hasAttribute('data-auto-display');
            
            const results = `
                <h4>Sidebar: ${sidebarId}</h4>
                <p><strong>Display:</strong> ${displayValue}</p>
                <p><strong>Auto-set:</strong> ${isAuto ? 'Yes' : 'No'}</p>
                <p><strong>Parent Layout:</strong> ${info.parentLayout}</p>
                <p><strong>Width:</strong> ${info.width}px</p>
                <pre>${JSON.stringify(info, null, 2)}</pre>
            `;
            
            document.getElementById('results').innerHTML = results;
        }
        
        function resetDisplay(sidebarId) {
            const sidebar = document.getElementById(sidebarId);
            if (!sidebar) return;
            
            sidebar.resetDisplayToAuto();
            setTimeout(() => getInfo(sidebarId), 100);
        }
    </script>
</body>
</html>
